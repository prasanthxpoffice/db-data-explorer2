<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Graph Viz (SQL Server)</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="css/site.css" />
    <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
    <script src="./config.js"></script>
  </head>
  <body>
    <div class="wrap">
      <div id="left-panel-root">
        <div class="filter-panel left-panel" id="filterPanel">
          <div class="panel-toggle" id="toggleFilters">
            <h3>Filters</h3>
            <button
              type="button"
              id="filterChevron"
              class="chevron-btn"
              aria-label="Toggle filters"
            >
              v
            </button>
          </div>
          <div class="panel-body">
            <div class="panel-section">
              <label>Datasource</label>
              <div class="multi-select" id="viewsDropdown">
                <button
                  type="button"
                  id="viewsToggle"
                  aria-haspopup="listbox"
                  aria-expanded="false"
                >
                  Select views v
                </button>
                <div class="multi-options" id="viewsOptions"></div>
              </div>
            </div>
            <div class="panel-section">
              <label>Entity</label>
              <select id="nodeType" style="min-width: 220px"></select>
            </div>
            <div class="panel-section">
              <label>Entity node text</label>
              <div class="suggestions">
                <input id="itemSearch" placeholder="Type to search items" />
                <div id="itemSuggestions" class="suggestions-panel"></div>
              </div>
            </div>
            <div class="panel-section">
              <label>Date range (optional)</label>
              <div class="row">
                <input id="fromDate" type="date" />
                <input id="toDate" type="date" />
              </div>
            </div>
            <div class="panel-section action-row">
              <button id="addSelected">Add</button>
            </div>
            <div class="panel-section action-row">
              <button id="showGraph">Show on graph</button>
              <button id="clearGraph" class="secondary">Clear Graph</button>
            </div>
            <div class="panel-section selections-panel">
              <ul id="selections"></ul>
            </div>
          </div>
        </div>
      </div>

      <div id="cy"></div>

      <div id="right-panel-root">
        <div class="filter-panel right-panel" id="configPanel">
          <div class="panel-toggle" id="toggleConfig">
            <h3>Graph Settings</h3>
            <button
              type="button"
              id="configChevron"
              class="chevron-btn"
              aria-label="Toggle settings"
            >
              v
            </button>
          </div>
          <div class="panel-body">
            <div class="panel-section">
              <label for="themeSelect">Theme</label>
              <select id="themeSelect">
                <option value="light" selected>Light</option>
                <option value="dark">Dark</option>
              </select>
            </div>
            <div class="panel-section">
              <label for="autoExpandToggle">Auto expand nodes</label>
              <label class="switch">
                <input type="checkbox" id="autoExpandToggle" />
                <span class="slider"></span>
              </label>
            </div>
            <div class="panel-section">
              <label for="maxNodes">Max nodes</label>
              <input id="maxNodes" type="number" min="10" value="200" />
            </div>
            <div class="panel-section graph-only">
              <label for="layoutSelect">Layout</label>
              <select id="layoutSelect">
                <option value="cose" selected>COSE</option>
                <option value="breadthfirst">Breadthfirst</option>
                <option value="circle">Circle</option>
                <option value="grid">Grid</option>
                <option value="concentric">Concentric</option>
              </select>
            </div>
            <div class="panel-section graph-only">
              <label for="animateToggle">Animate layout</label>
              <label class="switch">
                <input type="checkbox" id="animateToggle" checked />
                <span class="slider"></span>
              </label>
            </div>
            <div class="panel-section switch-group graph-only">
              <label for="stopExpandToggle">Stop node expand</label>
              <label class="switch">
                <input type="checkbox" id="stopExpandToggle" />
                <span class="slider"></span>
              </label>
              <label for="hideLeavesToggle">Hide leaves</label>
              <label class="switch">
                <input type="checkbox" id="hideLeavesToggle" />
                <span class="slider"></span>
              </label>
            </div>

            <div class="panel-section graph-only">
              <button id="exportPng" class="secondary">Export PNG</button>
            </div>
            <div class="panel-section">
              <label for="language">Language</label>
              <select id="language">
                <option value="en" selected>English</option>
                <option value="ar">العربية</option>
              </select>
            </div>
            <div class="panel-section info-row">
              <span id="status" class="status-text"></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="loading-overlay" role="status" aria-live="polite" hidden>
      <div class="loader">
        <div class="spinner" aria-hidden="true"></div>
        <div class="loading-text">Loading...</div>
      </div>
    </div>

    <script src="js/app.js"></script>
  </body>
</html>
